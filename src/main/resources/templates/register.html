<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <title>Registro | Eatelligence</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
  <link th:href="@{/css/register.css}" rel="stylesheet">
</head>
<body>
  <div class="container mt-4">
    <div class="card p-3 shadow formulario-registro">
      <h2 class="mb-4 text-center"><i class="bi bi-person-plus-fill"></i> Registro</h2>

      <!-- Formulario de usuario -->
      <div class="container-usuario mostrar">
        <form id="form-usuario" th:action="@{/validate-client-reg}" th:object="${registroUsuario}" method="post" class="form-registro">
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
          <div th:replace="fragments/user/usuarioForm :: clientUserFields"></div>
        </form>
      </div>

      <!-- Formulario de restaurante (oculto al inicio) -->
      <div class="container-restaurante">
        <form id="form-restaurante" th:action="@{/validate-rest-reg}" th:object="${registroRestaurante}" method="post" class="form-registro">
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
          <div th:replace="fragments/user/usuarioForm :: restaurantUserFields('propietario')"></div>
          <div th:replace="fragments/user/restauranteForm :: restaurantFields"></div>
        </form>
      </div>

      <!-- Checkbox fuera de los formularios y antes del botón -->
      <div class="form-check form-switch mt-4">
        <input class="form-check-input" type="checkbox" id="activarRestaurante">
        <label class="form-check-label" for="activarRestaurante">¿Eres un restaurante?</label>
      </div>

      <!-- Botón que lanza el registro según el formulario activo -->
      <div class="mt-4 text-end">
        <button type="button" id="btn-registro" class="btn btn-primary btn-lg w-100 py-2">
          <i class="bi bi-check-circle-fill"></i> Registrarse
        </button>
      </div>
      
      <div class="d-flex justify-content-center align-items-center text-center mt-4">
        <a class="btn btn-outline-danger py-2 w-50 d-flex justify-content-center align-items-center gap-2 text-center" th:href="@{/login}">
          <i class="bi bi-box-arrow-in-right"></i>
          <span>¿Ya tienes cuenta? <strong>Inicia sesión</strong></span>
        </a>                
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/register.js"></script>
</body>
</html>
